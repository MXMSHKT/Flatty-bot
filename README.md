# Flatty-bot
Данная программа парсит CIAN объявления города Москва, сохраняет и базу данных MongoDB и выводит их в телеграм бота, где пользователь может ввести параметры сортировки. Параметры пользователя также сохраняются в БД.


*Доступные команды:*
* `/show` — показывает информацию о квартирах
* `settings` — показывает параметры которы можно настроить для лучшего поиска
* `show parameters` - показывает настроенные параметры
* `/help` — показывает информацию о боте
* `/about` — узнать о боте

На данный момент юзер может сортировать по:
* Цене - Price
* Площади - Total area
* Типу квартире - type


Логически проект делится на 3 части:
* cianparser - Парсер циана:
  * *data_parsing.py* - содержит функции парсинга
  * *parser.py* - функция парсера и ее запуск 
* database - работа с БД:
  * *db.py* - инициализатор БД
* Телеграм бот:
  * *bot.py* - запуск бота
  * bot_settings:
    * *Flatty.py* - инициализатор бота
    * *Default_values* - содержит начальные параметры сортировки квартир  бота
  * Handlers:
    * *Flatty.py* - содержит сообщения и действия работы с бд, основная часть
    * *messages.py* - содержит сообщения и действия главного меню 
  * Menu:
    * *markups.py* - содержит все кнопки и клавиатуры для боты
    * *phrases.py* - содержит все сообщения отвечаемые ботом

Реализовано логгирование ошибок в файл logs.txt + запись спаршеных ссылок в файл used_page.txt
Данные которые парсятся с циана: link, id квартиры, Дата + время, Полный адрес, Ближайшее метро, Параметры квартиры{общая площадь, площадь кухни, жилая площадь, кол-во комнат, тип жилья, год постройки, этаж, всего этажей}, Цена, описание от владельца.
